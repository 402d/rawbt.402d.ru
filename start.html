<!DOCTYPE html>
<html lang="en">
<head>
    <title>RawBT</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">    
    <link rel="shortcut icon" href="favicon.ico">  
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js" integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a" crossorigin="anonymous"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">   
    <!-- Plugins CSS -->    
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">  
      
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">
    <script type="text/javascript" src="assets/plugins/jquery-3.3.1.min.js"></script>
    
</head> 

<body class="body-green">
    <div class="page-wrapper">
        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                            <span aria-hidden="true" class="icon_printer icon"></span>
                            <span class="text-highlight">RawBT</span> <span class="text-bold">Printer</span>
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Quick Start</li>
                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><i class="icon fa fa-paper-plane"></i> Quick Start</h1>
                    <div class="meta"><i class="far fa-clock"></i> Last updated: October 20th, 2018</div>
                </div><!--//doc-header-->
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                            <section id="hello" class="doc-section">
                                <h2 class="section-title">Hello, world!</h2>
                                <div class="section-block">
                                <p>To print the text to thermal printer connected to client's phone it is enough to place a special type
                                    of link on the site.</p>
                                    <div class="code-block">
                                        <h6>Simple example:</h6>
                                        <script type="text/plain" class="language-markup"><a href="rawbt:Hello,%20world!%0A%0A"> Hello, world! </a></script>
                                        <p>If you have a space “ “ in an URL, most probably it will not be recognize by the browser, all the special characters must be encoded (transformed).</p>
                                        <p><a class="btn btn-green" href = "rawbt:Hello,%20world!%0A%0A">Hello, world!</a></p>
                                   </div>
                                    <p>At first glance, everything is well printed. But if you try to print a picture, we get an error. Urlencode is not binary safe. To solve this problem, I implemented the ability to transfer data in base64 encoding.</p>
                                    <div class="callout-block callout-success">
                                        <div class="icon-holder">
                                            <i class="fas fa-thumbs-up"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <h4 class="callout-title">Useful Tip:</h4>
                                            <p>If you have not read the description of the <a href="appfunctions.html">functions</a> of the program, do it now.
                                                You will understand better how the program processes the data you send to it.</p>
                                        </div><!--//content-->
                                    </div>
                                    <div class="code-block">
                                        <h6>rawbt:base64,</h6>
                                        <script type="text/plain" class="language-markup"><a href="rawbt:base64,G0AddjAAEACUAAAAAAAAAAAAAA..."> Print picture </a></script>
                                        <p>The string that is encoded represents the GS v 0 control sequence.</p>
                                        <p><a class="btn btn-green" href = "rawbt:base64,G0AddjAAEACUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//AAAAAAAAAAAAAAAAAAH//8AAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAH////AAAAAAAAAAAAAAAAH////4AAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAB/////4AAAAAAAAAAAAAAAf/////AAAAAAAAAAAAAAAP/////wAAAAAAAAAAAAAAH/////+AAAAAAAAAAAAAAB//////gAAAAAAAAAAAAAA//////8AAAAAAAAAAAAAAP//////AAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAB//////+AAAAAAAAAAAAAAf//////gAAAAAAAAAAAAAH//////4AAAAAAAAAAAAAB//////+AAAAAAAAAAAAAAf//////wAAAAAAAAAAAAAH//////8AAAAAAAAAAAAAB///4H//AAAAAAAAAAAAAA/j/8A//wAAAAAAAAAAAAAPwf+AH/8AAAAAAAAAAAAAD4D/AA//AAAAAAAAAAAAAA8AfwAP/wAAAAAAAAAAAAAPAH8EB/8AAAAAAAAAAAAADwB+Dwf/AAAAAAAAAAAAAA4cPh8H/4AAAAAAAAAAAAAOPD4fh/+AAAAAAAAAAAAABj4+P4f/gAAAAAAAAAAAAAc+Pj+H/4AAAAAAAAAAAAAHPuP/h/+AAAAAAAAAAAAABz8Af4f/gAAAAAAAAAAAAAceAB8H/4AAAAAAAAAAAAAHnAAHD/+AAAAAAAAAAAAAB9AAAf//gAAAAAAAAAAAAAfgAAA//4AAAAAAAAAAAAAHwAAAD/+AAAAAAAAAAAAAB4AAAAf/gAAAAAAAAAAAAAcAAAAH/4AAAAAAAAAAAAAGQAAAx/+AAAAAAAAAAAAABmAAA4f/gAAAAAAAAAAAAA8wAAYH/4AAAAAAAAAAAAAPGAAYD/+AAAAAAAAAAAAAD4YAcBv/wAAAAAAAAAAAAA/Dg8Az/8AAAAAAAAAAAAAP8H4Aw//gAAAAAAAAAAAAH5gABwH/4AAAAAAAAAAAAB+EAAwB//AAAAAAAAAAAAA/gwAwAf/wAAAAAAAAAAAAP4GA4AH/+AAAAAAAAAAAAD+AfwAA//wAAAAAAAAAAAB/AAAAAP/8AAAAAAAAAAAA/wAAAAB//gAAAAAAAAAAAP8AAAAAf/8AAAAAAAAAAAH+AAAAAH//gAAAAAAAAAAD/gAAAAA//4AAAAAAAAAAA/4AAAAAP//AAAAAAAAAAAf8AAAAAD//4AAAAAAAAAAP/AAAAAAf//AAAAAAAAAAH/wAAAAAH//4AAAAAAAAAB/4AAAAAA//+AAAAAAAAAA/+AAAAAAP//wAAAAAAAAAf/gAAAAAD//+AAAAAAAAAP/wAAAAAAff/wAAAAAAAAD/8AAAAAAH7/8AAAAAAAAB/+AAAAAAA/f/gAAAAAAAA//gAAAAAAP7/8AAAAAAAAP3wAAAAAAB/f/AAAAAAAAH78AAAAAAAf3/4AAAAAAAD+/AAAAAAAD+/+AAAAAAAA/fgAAAAAAA/3/wAAAAAAAf34AAAAAAAH9/8AAAAAAAH78AAAAAAAB/v/gAAAAAAD+/AAAAAAAAP7/4AAAAAAA/fgAAAAAAAD+f/AAAAAAAf34AAAAAAAAf3/wAAAAAAH58AAAAAAAAH8/+AAAAAAD+/AAAAAAAAA/P/gAAAAAA/vwAAAAAAAAP7/8AAAAAAfz4AAAAAAAAD+//AAAAAAH8+AAAAAAAAAfn/wAAAAAB/fAAAAAAAAAH5/8AAAAAA/3wAAAAAAAAB+f/gAAAAAP58AAAAAAAAAPn/4AAAAAD+fAAAAAAAAAD5/+AAAAAB/ngAAAAAAAAA+f/gAAAAAf54AAAAAAAAAPH/4AAAAAH+eAAAAAAAAABx//AAAAAB/jgAAAAAAAAAAf/wAAAAA/44AAAAAAAAAAH/8AAAAAP+OAAAAAAAAABgf/AAAAAD/zAAAAAAAAAD/D/wAAAAA/8QAAAAAAAAAw+P8AAAAAP/AAAAAAAAAAYD5/AAAAAD/4AAAAAAAAAEAPPgAAAAA//AAAAAAAAADAB54AAAAAP/wAAAAAAAABwAPeAAAAAD/+AAAAAAAAA8AD3gAAAAA4PwAAAAAAAAZAA94AAAAAcB+AAAAAAAAMYAf8AAAAAOAH4AAAAAAADGAP/gAAAAHAA/AAAAAAABgwH4eAAAABgAP8AAAAAAAYOH8BwAAAAwAB/gAAAAAAGB/8AMAAAAcAAP+AAAAAADAP+ABgAAA+AAD/wAAAAAAwB+AAYAAA+AAAf+AAAAAAMAAAAGAAA+AAAH/wAAAAADAAAAAwAAcAAAA/+AAAAAAwAAAAMAAOAAAAP/gAAAAAMAAAADAADAAAAB/8AAAAADAAAAAwABgAAAAf/gAAAAAgAAAAGAAYAAAAD/4AAAAAIAAAABgAGAAAAA//AAAAAGAAAAAcABgAAAAH/wAAAABgAAAADgAYAAAAA/8AAAAAYAAAAAYAGAAAAAP/AAAAAGAAAAADABgAAAAB/gAAAABgAAAAA4AYAAAAAPwAAAAAYAAAAAGADAAAAABwAAAAAMAAAAAAwAwAAAAAcAAAAADAAAAAAMAMAAAAADgAAAAAwAAAAADADAAAAAAYAAAAAMAAAAAAwBgAAAAADAAAAAOAAAAAAYAYAAAAAAYAAAAHgAAAAAOAGAAAAAAHAAAAH4AAAAAPADAAAAAAA8AAAH8AAAAAHgAwAAAAAAPwAAH/AAAAAHgAMAAAAAAB/gAf/wAAAAHgADAAAAAAAf////8AAAAHgAAwAAAAAAH/////AAAAHgAAGAAAAAAA/////wAAADgAABwAAAAAAP////4AAADwAAAPgAAAAAH////+AAABwAAAA/8AAAAB//A//wAAA4AAAAB//AAAAfwAABcAAAcAAAAAAH+AAAMAAAADAAAOAAAAAAAD4AAHAAAAAYAAHAAAAAAAAPgADgAAAAGAADgAAAAAAAA/ADwAAAAAwABwAAAAAAAAB//4AAAAAHAB4AAAAAAAAAD/wAAAAAA8D4AAAAAAAAAAAAAAAAAAH/4AAAAAAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAAAAAAAAAAAAAAK">Print picture</a></p>
                                    </div>

                                </div><!--//section-block-->
                            </section>
                            <section id="intent" class="doc-section">
                                <h2 class="section-title">Call using the Intent scheme</h2>
                                <div class="section-block">
                                    <p><strong><i class="fas fa-external-link-square-alt"></i> Documentation:</strong> <a href="https://developer.chrome.com/multidevice/android/intents" target="_blank">Android Intents with Chrome</a></p>

                                    <div class="code-block">
                                        <h6>Intent scheme example:</h6>
                                        <script type="text/plain" class="language-markup"><a href="intent:data_to_print#Intent;scheme=rawbt;package=ru.a402d.rawbtprinter;end;">Print</a></script>
                                    <p>Using the intent scheme is standard. An additional benefit from its use is that if the application is not installed, browser will automatically open app's page  from the PlayMarket.</p>
                                    </div>
                                    <p><a class="btn btn-green" href="intent:Hello,%20world!%0A%0A#Intent;scheme=rawbt;package=ru.a402d.rawbtprinter;end;"> Hello, world! </a></p>
                                </div><!--//section-block-->
                            </section>
                            <section id="openwith" class="doc-section">
                                <h2 class="section-title">Open with RawBT</h2>
                                <div class="section-block">
                                    <p>After installing the application, it is registered in the system as a means to open http and http links that end with .txt, .prn or .pdf and also images (.png,.jpg,.bmp).</p>
                                    <script type="text/plain"  class="language-javascript"><a href="http://rawbt.402d.ru/demo/test.txt" class="print-file">.txt</a></script>
                                     <p>The method of printing through the placement of a simple file link is not reliable. The user can establish a permanent association of the extension with another application and the file will be opened in another application.</p>

                                    <p>In order for the file to be received by my application, you need to use the intent scheme.
                                        But since the URL becomes long, it is easier to create it in a function, as shown below.</p>
                                    <script type="text/plain"  class="language-javascript">function sendUrlToPrint(url){
    var  beforeUrl = 'intent:';
    var  afterUrl = '#Intent;';
    // Intent call with component
    afterUrl += 'component=ru.a402d.rawbtprinter.activity.PrintDownloadActivity;'
    afterUrl += 'package=ru.a402d.rawbtprinter;end;';
    document.location=beforeUrl+encodeURI(url)+afterUrl;
    return false;
}
// jQuery: set onclick hook for css class print-file
    $(document).ready(function(){
        $('.print-file').click(function () {
             return sendUrlToPrint($(this).attr('href'));
        });
    });


// or direct
<a href="#" onclick="return sendUrlToPrint('http(s)://yousite.com/test.txt');">.txt</a>";
</script>
                                    <script>
                                    function sendUrlToPrint(url){
                                        var  beforeUrl = 'intent:';
                                        var  afterUrl = '#Intent;component=ru.a402d.rawbtprinter.activity.PrintDownloadActivity;package=ru.a402d.rawbtprinter;end;';
                                        document.location=beforeUrl+encodeURI(url)+afterUrl;
                                        return false;
                                    }
                                    // set onclick hook for css class print-file
                                    $(document).ready(function(){
                                        $('.print-file').click(function () {
                                            return sendUrlToPrint($(this).attr('href'));
                                        });
                                    });

                                    </script>
                                    <p><a href="http://rawbt.402d.ru/demo/test.txt" class="print-file btn btn-green">.txt</a>
                                    <a href="http://rawbt.402d.ru/demo/test.prn" class="print-file btn btn-green">.prn</a>
                                    <a href="http://rawbt.402d.ru/demo/test.pdf" class="print-file btn btn-green">.pdf</a>
                                    <a href="http://rawbt.402d.ru/demo/demo.png" class="print-file btn btn-green" >.png</a></p>
                                </div><!--//section-block-->

                                <p style="color:red">Remember that confidential information should not be placed on the permanent URL accessible without authorization.</p>
                            </section>
                            <section id="fromjs" class="doc-section">
                                <h2 class="section-title">How to generate a receipt from javascript</h2>
                                <div class="section-block">
                                    <p>The main task of the application is to implement a data delivery channel to the end device (printer) without distortion (This implements rawbt:base64,...).</p>
                                    <p>When we create a page we usually use utf-8 encoding. The printer is awaiting data in single-byte encoding. The application simplifies the task of printing plain text in coding utf-8. (This is standart for rawbt)</p>
                                    <p>Let's for example implement a printout of text from the pre block.</p>
                                    <p><b>pre with id "pre_print":</b>
                                    <pre id="pre_print">
--------------------------------
            TEST
--------------------------------
Items 1
                      3 x $20.00
Items 2
                      1 x $40.00
********************************
                   TOTAL $100.00
--------------------------------
</pre></p>

                                    <script type="text/plain"  class="language-javascript">function BtPrint(prn){
        var S = "#Intent;scheme=rawbt;";
        var P =  "package=ru.a402d.rawbtprinter;end;";
        var textEncoded = encodeURI(prn);
        window.location.href="intent:"+textEncoded+S+P;
}</script>

<script>
    function BtPrint(prn){
        var S = "#Intent;scheme=rawbt;";
        var P =  "package=ru.a402d.rawbtprinter;end;";
        var textEncoded = encodeURI(prn);
        window.location.href="intent:"+textEncoded+S+P;
    }
</script>


                                    <script type="text/plain"  class="language-javascript">onclick="BtPrint(document.getElementById('pre_print').innerText)"</script>

                                    <p><button class="btn btn-green" onclick="BtPrint(document.getElementById('pre_print').innerText)">Print text from pre block</button></p>

                                    <p>As you can see, we just collect a string of text. For extended text formatting (for example: boldness, alignment), you must add escape sequences

                                   ( <strong><i class="fas fa-external-link-square-alt"></i> Wiki:</strong> <a href="https://en.wikipedia.org/wiki/ESC/P" target="_blank">ESC/P - printer control language</a> ) to the string.</p>



                                </div>
                            </section>
                            <section id="backend" class="doc-section">
                                <h2 class="section-title">How print data generated by the back-end of the site</h2>
                                <div class="section-block">
                                    <p>Ajax technology works well for this. More reliably, when encoding data in bass64 is performed immediately on the server side.</p>
                                    <p>I hope the young developers are familiar with <a href="http://api.jquery.com/jquery.ajax/">jQuery</a>, but experienced ones have not forgotten it.</p>
                                    <div class="code-block">
                                        <h6>Ajax example:</h6>
                                        <script type="text/plain"  class="language-javascript">function ajax_print(url){
    $.ajax(url).
        done(function(data){
            var S = "#Intent;scheme=rawbt;";
            var P =  "package=ru.a402d.rawbtprinter;end;";
            window.location.href="intent:"+data+S+P;
        });
    return false;
}</script>
<script>function ajax_print(url){
    $.ajax(url).
        done(function(data){
            var S = "#Intent;scheme=rawbt;";
            var P =  "package=ru.a402d.rawbtprinter;end;";
            window.location.href="intent:"+data+S+P;
        });
    return false;
}</script>
                                        <button class="btn btn-green" onclick="ajax_print('http://rawbt.402d.ru/app2/demo/demo.php',this)">Attention! Long check !</button><br/><br/>
                                        <p><strong><i class="fas fa-external-link-square-alt"></i> Source: </strong> <a href="https://github.com/402d/rawbt.402d.ru/blob/master/app2/demo/demo.php" target="_blank">demo.php on GitHub</a></p>

                                        <p>Adapted example of PHP library Mike42\Escpos</p>
                                </div><!--//section-block-->
                            </section>


                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
	                        
	                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
	                                <a class="nav-link scrollto" href="#hello">Hello, World</a>
                                    <a class="nav-link scrollto" href="#intent">Intent Scheme</a>
                                    <a class="nav-link scrollto" href="#openwith">Open with</a>
                                    <a class="nav-link scrollto" href="#fromjs">Generate receipt</a>
                                    <a class="nav-link scrollto" href="#backend">Back-end</a>
	                            </nav><!--//doc-menu-->
	                        
                        </div>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->              
            </div><!--//container-->
        </div><!--//doc-wrapper-->
        

    </div><!--//page-wrapper-->
    
    <footer id="footer" class="footer text-center">
        <div class="container">
            <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can buy the commercial license via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">Designed with <i class="fas fa-heart"></i> by <a href="https://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> for developers</small>
            
        </div><!--//container-->
    </footer><!--//footer-->
    
     
    <!-- Main Javascript -->          
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/plugins/prism/prism.js"></script>    
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>      
    <script type="text/javascript" src="assets/plugins/stickyfill/dist/stickyfill.min.js"></script>                                                             
    <script type="text/javascript" src="assets/js/main.js"></script>
    
</body>
</html> 

